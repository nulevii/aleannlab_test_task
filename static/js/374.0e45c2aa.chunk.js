"use strict";(self.webpackChunkaleannlab_test_task=self.webpackChunkaleannlab_test_task||[]).push([[374],{372:function(t,e,n){n.d(e,{D5:function(){return b},aV:function(){return z}});var o=n(791);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){for(;t;){if(t.classList&&t.classList.contains(e))return!0;t=t.parentElement}return!1}function u(t){var e=t.getBoundingClientRect();return{x:e.left,y:e.top}}function c(t,e,n){return"https://"+String.fromCharCode(97+(t+e+n)%3)+".tile.openstreetmap.org/"+n+"/"+t+"/"+e+".png"}var m=function(){return!0},p=function(t,e){return(t+180)/360*Math.pow(2,e)},d=function(t,e){return(1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,e)};function f(t,e){return t/Math.pow(2,e)*360-180}function v(t,e){var n=Math.PI-2*Math.PI*t/Math.pow(2,e);return 180/Math.PI*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))}function g(t,e){var n=u(t);return[e.clientX-n.x,e.clientY-n.y]}var _=[v(Math.pow(2,10),10),v(0,10),f(0,10),f(Math.pow(2,10),10)],w="undefined"!==typeof window,M=w&&window.performance&&window.performance.now?function(){return window.performance.now()}:function(){var t=(new Date).getTime();return function(){return(new Date).getTime()-t}}(),x=function(t){return w?(window.requestAnimationFrame||window.setTimeout)(t):(t((new Date).getTime()),null)},S=function(t){return!(!w||!t)&&(window.cancelAnimationFrame||window.clearTimeout)(t)};function T(t,e,n,o,i){return t&&0!==t.length?t.map((function(t){return e(n,o,i,t)+(1===t?"":" "+t+"x")})).join(", "):""}var b=function(t){var e,n;function i(e){var n,o,i,a,s,u,c,w,T;return r(l(T=t.call(this,e)||this),"_containerRef",void 0),r(l(T),"_mousePosition",void 0),r(l(T),"_loadTracker",void 0),r(l(T),"_dragStart",null),r(l(T),"_mouseDown",!1),r(l(T),"_moveEvents",[]),r(l(T),"_lastClick",null),r(l(T),"_lastTap",null),r(l(T),"_lastWheel",null),r(l(T),"_touchStartPixel",null),r(l(T),"_touchStartMidPoint",null),r(l(T),"_touchStartDistance",null),r(l(T),"_secondTouchEnd",null),r(l(T),"_warningClearTimeout",null),r(l(T),"_isAnimating",!1),r(l(T),"_animationStart",null),r(l(T),"_animationEnd",null),r(l(T),"_zoomStart",null),r(l(T),"_centerTarget",null),r(l(T),"_zoomTarget",null),r(l(T),"_zoomAround",null),r(l(T),"_animFrame",null),r(l(T),"_boundsSynced",!1),r(l(T),"_minMaxCache",null),r(l(T),"_lastZoom",void 0),r(l(T),"_lastCenter",void 0),r(l(T),"_centerStart",void 0),r(l(T),"_resizeObserver",null),r(l(T),"updateWidthHeight",(function(){if(T._containerRef){var t=T._containerRef.getBoundingClientRect();if(t&&t.width>0&&t.height>0)return T.setState({width:t.width,height:t.height}),!0}return!1})),r(l(T),"wa",(function(){var t;return(t=window).addEventListener.apply(t,arguments)})),r(l(T),"wr",(function(){var t;return(t=window).removeEventListener.apply(t,arguments)})),r(l(T),"bindMouseEvents",(function(){T.wa("mousedown",T.handleMouseDown),T.wa("mouseup",T.handleMouseUp),T.wa("mousemove",T.handleMouseMove)})),r(l(T),"bindTouchEvents",(function(){T.wa("touchstart",T.handleTouchStart,{passive:!1}),T.wa("touchmove",T.handleTouchMove,{passive:!1}),T.wa("touchend",T.handleTouchEnd,{passive:!1})})),r(l(T),"unbindMouseEvents",(function(){T.wr("mousedown",T.handleMouseDown),T.wr("mouseup",T.handleMouseUp),T.wr("mousemove",T.handleMouseMove)})),r(l(T),"unbindTouchEvents",(function(){T.wr("touchstart",T.handleTouchStart),T.wr("touchmove",T.handleTouchMove),T.wr("touchend",T.handleTouchEnd)})),r(l(T),"bindResizeEvent",(function(){T.wa("resize",T.updateWidthHeight)})),r(l(T),"unbindResizeEvent",(function(){T.wr("resize",T.updateWidthHeight)})),r(l(T),"bindWheelEvent",(function(){T._containerRef&&T._containerRef.addEventListener("wheel",T.handleWheel,{passive:!1})})),r(l(T),"unbindWheelEvent",(function(){T._containerRef&&T._containerRef.removeEventListener("wheel",T.handleWheel)})),r(l(T),"setCenterZoomTarget",(function(t,e,n,o,i){if(void 0===n&&(n=!1),void 0===o&&(o=null),void 0===i&&(i=300),T.props.animate&&(!n||T.distanceInScreens(t,e,T.state.center,T.state.zoom)<=T.props.animateMaxScreens)){if(T._isAnimating){S(T._animFrame);var a=T.animationStep(M()),r=a.centerStep,s=a.zoomStep;T._centerStart=r,T._zoomStart=s}else T._isAnimating=!0,T._centerStart=T.limitCenterAtZoom([T._lastCenter[0],T._lastCenter[1]],T._lastZoom),T._zoomStart=T._lastZoom,T.onAnimationStart();T._animationStart=M(),T._animationEnd=T._animationStart+i,o?(T._zoomAround=o,T._centerTarget=T.calculateZoomCenter(T._lastCenter,o,T._lastZoom,e)):(T._zoomAround=null,T._centerTarget=t),T._zoomTarget=e,T._animFrame=x(T.animate)}else if(T.stopAnimating(),o){var l=T.calculateZoomCenter(T._lastCenter,o,T._lastZoom,e);T.setCenterZoom(l,e,n)}else T.setCenterZoom(t||T.state.center,e,n)})),r(l(T),"setCenterZoomForChildren",(function(t,e){T.setCenterZoomTarget(t||T.state.center,e||T.state.zoom,!0)})),r(l(T),"distanceInScreens",(function(t,e,n,o){var i=T.state,a=i.width,r=i.height,s=T.latLngToPixel(n,n,o),l=T.latLngToPixel(t,n,o),h=T.latLngToPixel(n,n,e),u=T.latLngToPixel(t,n,e),c=(Math.abs(s[0]-l[0])+Math.abs(h[0]-u[0]))/2/a,m=(Math.abs(s[1]-l[1])+Math.abs(h[1]-u[1]))/2/r;return Math.sqrt(c*c+m*m)})),r(l(T),"animationStep",(function(t){if(!T._animationEnd||!T._animationStart||!T._zoomTarget||!T._zoomStart||!T._centerStart||!T._centerTarget)return{centerStep:T.state.center,zoomStep:T.state.zoom};var e,n=T._animationEnd-T._animationStart,o=Math.max(t-T._animationStart,0),i=(e=o/n)*(2-e),a=(T._zoomTarget-T._zoomStart)*i,r=T._zoomStart+a;return T._zoomAround?{centerStep:T.calculateZoomCenter(T._centerStart,T._zoomAround,T._zoomStart,r),zoomStep:r}:{centerStep:[T._centerStart[0]+(T._centerTarget[0]-T._centerStart[0])*i,T._centerStart[1]+(T._centerTarget[1]-T._centerStart[1])*i],zoomStep:r}})),r(l(T),"animate",(function(t){if(!T._animationEnd||t>=T._animationEnd)T._isAnimating=!1,T.setCenterZoom(T._centerTarget,T._zoomTarget,!0),T.onAnimationStop();else{var e=T.animationStep(t),n=e.centerStep,o=e.zoomStep;T.setCenterZoom(n,o),T._animFrame=x(T.animate)}})),r(l(T),"stopAnimating",(function(){T._isAnimating&&(T._isAnimating=!1,T.onAnimationStop(),S(T._animFrame))})),r(l(T),"limitCenterAtZoom",(function(t,e){var n=T.getBoundsMinMax(e||T.state.zoom);return[Math.max(Math.min(!t||isNaN(t[0])?T.state.center[0]:t[0],n[1]),n[0]),Math.max(Math.min(!t||isNaN(t[1])?T.state.center[1]:t[1],n[3]),n[2])]})),r(l(T),"onAnimationStart",(function(){T.props.onAnimationStart&&T.props.onAnimationStart()})),r(l(T),"onAnimationStop",(function(){T.props.onAnimationStop&&T.props.onAnimationStop()})),r(l(T),"setCenterZoom",(function(t,e,n){void 0===n&&(n=!1);var o=T.limitCenterAtZoom(t,e);if(e&&Math.round(T.state.zoom)!==Math.round(e)){var i=T.tileValues(T.state),a=T.tileValues({center:o,zoom:e,width:T.state.width,height:T.state.height}),r=T.state.oldTiles;T.setState({oldTiles:r.filter((function(t){return t.roundedZoom!==i.roundedZoom})).concat(i)},m);for(var s={},l=a.tileMinX;l<=a.tileMaxX;l++)for(var h=a.tileMinY;h<=a.tileMaxY;h++){s[l+"-"+h+"-"+a.roundedZoom]=!1}T._loadTracker=s}T.setState({center:o,zoom:e||T.state.zoom},m);var u=T.props.zoom?T.props.zoom:T._lastZoom,c=T.props.center?T.props.center:T._lastCenter;e&&(n||Math.abs(u-e)>.001||Math.abs(c[0]-o[0])>1e-5||Math.abs(c[1]-o[1])>1e-5)&&(T._lastZoom=e,T._lastCenter=[].concat(o),T.syncToProps(o,e))})),r(l(T),"getBoundsMinMax",(function(t){if("center"===T.props.limitBounds)return _;var e=T.state,n=e.width,o=e.height;if(T._minMaxCache&&T._minMaxCache[0]===t&&T._minMaxCache[1]===n&&T._minMaxCache[2]===o)return T._minMaxCache[3];var i=256*Math.pow(2,t),a=n>i?0:f(n/512,t),r=o>i?0:v(Math.pow(2,t)-o/512,t),s=n>i?0:f(Math.pow(2,t)-n/512,t),l=[r,o>i?0:v(o/512,t),a,s];return T._minMaxCache=[t,n,o,l],l})),r(l(T),"tileLoaded",(function(t){T._loadTracker&&t in T._loadTracker&&(T._loadTracker[t]=!0,0===Object.values(T._loadTracker).filter((function(t){return!t})).length&&T.setState({oldTiles:[]},m))})),r(l(T),"handleTouchStart",(function(t){if(T._containerRef&&(!t.target||!h(t.target,"pigeon-drag-block")))if(1===t.touches.length){var e=t.touches[0],n=g(T._containerRef,e);if(T.coordsInside(n)&&(T._touchStartPixel=[n],!T.props.twoFingerDrag))if(T.stopAnimating(),T._lastTap&&M()-T._lastTap<300){t.preventDefault();var o=T.pixelToLatLng(T._touchStartPixel[0]);T.setCenterZoomTarget(null,Math.max(T.props.minZoom,Math.min(T.state.zoom+1,T.props.maxZoom)),!1,o)}else T._lastTap=M(),T.trackMoveEvents(n)}else if(2===t.touches.length&&T._touchStartPixel){t.preventDefault(),T.stopTrackingMoveEvents(),(T.state.pixelDelta||T.state.zoomDelta)&&T.sendDeltaChange();var i=g(T._containerRef,t.touches[0]),a=g(T._containerRef,t.touches[1]);T._touchStartPixel=[i,a],T._touchStartMidPoint=[(i[0]+a[0])/2,(i[1]+a[1])/2],T._touchStartDistance=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2))}})),r(l(T),"handleTouchMove",(function(t){if(T._containerRef){if(1===t.touches.length&&T._touchStartPixel){var e=t.touches[0],n=g(T._containerRef,e);T.props.twoFingerDrag?T.coordsInside(n)&&T.showWarning("fingers"):(t.preventDefault(),T.trackMoveEvents(n),T.setState({pixelDelta:[n[0]-T._touchStartPixel[0][0],n[1]-T._touchStartPixel[0][1]]},m))}else if(2===t.touches.length&&T._touchStartPixel&&T._touchStartMidPoint&&T._touchStartDistance){var o=T.state,i=o.width,a=o.height,r=o.zoom;t.preventDefault();var s=g(T._containerRef,t.touches[0]),l=g(T._containerRef,t.touches[1]),h=[(s[0]+l[0])/2,(s[1]+l[1])/2],u=[h[0]-T._touchStartMidPoint[0],h[1]-T._touchStartMidPoint[1]],c=Math.sqrt(Math.pow(s[0]-l[0],2)+Math.pow(s[1]-l[1],2)),p=Math.max(T.props.minZoom,Math.min(T.props.maxZoom,r+Math.log2(c/T._touchStartDistance)))-r,d=Math.pow(2,p),f=[(i/2-h[0])*(d-1),(a/2-h[1])*(d-1)];T.setState({zoomDelta:p,pixelDelta:[f[0]+u[0]*d,f[1]+u[1]*d]},m)}}else T._touchStartPixel=null})),r(l(T),"handleTouchEnd",(function(t){if(T._containerRef){if(T._touchStartPixel){var e=T.props,n=e.zoomSnap,o=e.twoFingerDrag,i=e.minZoom,a=e.maxZoom,r=T.state.zoomDelta,s=T.sendDeltaChange(),l=s.center,h=s.zoom;if(0===t.touches.length)if(o)T.clearWarning();else{var u=T._touchStartPixel[0],c=g(T._containerRef,t.changedTouches[0]);(Math.abs(u[0]-c[0])>2||Math.abs(u[1]-c[1])>2)&&(!T._secondTouchEnd||M()-T._secondTouchEnd>300)&&(t.preventDefault(),T.throwAfterMoving(c,l,h)),T._touchStartPixel=null,T._secondTouchEnd=null}else if(1===t.touches.length){t.preventDefault();var m=g(T._containerRef,t.touches[0]);if(T._secondTouchEnd=M(),T._touchStartPixel=[m],T.trackMoveEvents(m),n){var p,d=T._touchStartMidPoint?T.pixelToLatLng(T._touchStartMidPoint):T.state.center;p=o&&Math.round(T.state.zoom)===Math.round(T.state.zoom+r)?Math.round(T.state.zoom):r>0?Math.ceil(T.state.zoom):Math.floor(T.state.zoom);var f=Math.max(i,Math.min(p,a));T.setCenterZoomTarget(d,f,!1,d)}}}}else T._touchStartPixel=null})),r(l(T),"handleMouseDown",(function(t){if(T._containerRef){var e=g(T._containerRef,t);if(0===t.button&&(!t.target||!h(t.target,"pigeon-drag-block"))&&T.coordsInside(e))if(T.stopAnimating(),t.preventDefault(),T._lastClick&&M()-T._lastClick<300){if(!h(t.target,"pigeon-click-block")){var n=T.pixelToLatLng(T._mousePosition||e);T.setCenterZoomTarget(null,Math.max(T.props.minZoom,Math.min(T.state.zoom+1,T.props.maxZoom)),!1,n)}}else T._lastClick=M(),T._mouseDown=!0,T._dragStart=e,T.trackMoveEvents(e)}})),r(l(T),"handleMouseMove",(function(t){T._containerRef&&(T._mousePosition=g(T._containerRef,t),T._mouseDown&&T._dragStart&&(T.trackMoveEvents(T._mousePosition),T.setState({pixelDelta:[T._mousePosition[0]-T._dragStart[0],T._mousePosition[1]-T._dragStart[1]]},m)))})),r(l(T),"handleMouseUp",(function(t){if(T._containerRef){var e=T.state.pixelDelta;if(T._mouseDown){T._mouseDown=!1;var n=g(T._containerRef,t);if(!T.props.onClick||t.target&&h(t.target,"pigeon-click-block")||e&&!(Math.abs(e[0])+Math.abs(e[1])<=2)){var o=T.sendDeltaChange(),i=o.center,a=o.zoom;T.throwAfterMoving(n,i,a)}else{var r=T.pixelToLatLng(n);T.props.onClick({event:t,latLng:r,pixel:n}),T.setState({pixelDelta:void 0},m)}}}else T._mouseDown=!1})),r(l(T),"stopTrackingMoveEvents",(function(){T._moveEvents=[]})),r(l(T),"trackMoveEvents",(function(t){var e=M();(0===T._moveEvents.length||e-T._moveEvents[T._moveEvents.length-1].timestamp>40)&&(T._moveEvents.push({timestamp:e,coords:t}),T._moveEvents.length>2&&T._moveEvents.shift())})),r(l(T),"throwAfterMoving",(function(t,e,n){var o=T.state,i=o.width,a=o.height,r=T.props.animate,s=M(),l=T._moveEvents.shift();if(l&&r){var h=Math.max(s-l.timestamp,1),u=[(t[0]-l.coords[0])/h*120,(t[1]-l.coords[1])/h*120],c=Math.sqrt(u[0]*u[0]+u[1]*u[1]);if(c>40){var m=1500*c/Math.sqrt(i*i+a*a),g=f(p(e[1],n)-u[0]/256,n),_=v(d(e[0],n)-u[1]/256,n);T.setCenterZoomTarget([_,g],n,!1,null,m)}}T.stopTrackingMoveEvents()})),r(l(T),"sendDeltaChange",(function(){var t=T.state,e=t.center,n=t.zoom,o=t.pixelDelta,i=t.zoomDelta,a=e[0],r=e[1];return(o||0!==i)&&(r=f(p(e[1],n+i)-(o?o[0]/256:0),n+i),a=v(d(e[0],n+i)-(o?o[1]/256:0),n+i),T.setCenterZoom([a,r],n+i)),T.setState({pixelDelta:void 0,zoomDelta:0},m),{center:T.limitCenterAtZoom([a,r],n+i),zoom:n+i}})),r(l(T),"getBounds",(function(t,e){void 0===t&&(t=T.state.center),void 0===e&&(e=T.zoomPlusDelta());var n=T.state,o=n.width,i=n.height;return{ne:T.pixelToLatLng([o-1,0],t,e),sw:T.pixelToLatLng([0,i-1],t,e)}})),r(l(T),"syncToProps",(function(t,e){void 0===t&&(t=T.state.center),void 0===e&&(e=T.state.zoom);var n=T.props.onBoundsChanged;n&&(n({center:t,zoom:e,bounds:T.getBounds(t,e),initial:!T._boundsSynced}),T._boundsSynced=!0)})),r(l(T),"handleWheel",(function(t){var e=T.props,n=e.mouseEvents,o=e.metaWheelZoom,i=e.zoomSnap,a=e.animate;if(n)if(!o||t.metaKey||t.ctrlKey){t.preventDefault();var r=-t.deltaY/150;if(!i&&T._zoomTarget){var s=T._zoomTarget-T.state.zoom;T.zoomAroundMouse(r+s,t)}else a?T.zoomAroundMouse(r,t):(!T._lastWheel||M()-T._lastWheel>300)&&(T._lastWheel=M(),T.zoomAroundMouse(r,t))}else T.showWarning("wheel")})),r(l(T),"showWarning",(function(t){T.state.showWarning&&T.state.warningType===t||T.setState({showWarning:!0,warningType:t}),T._warningClearTimeout&&window.clearTimeout(T._warningClearTimeout),T._warningClearTimeout=window.setTimeout(T.clearWarning,300)})),r(l(T),"clearWarning",(function(){T.state.showWarning&&T.setState({showWarning:!1})})),r(l(T),"zoomAroundMouse",(function(t,e){if(T._containerRef){var n=T.state.zoom,o=T.props,i=o.minZoom,a=o.maxZoom,r=o.zoomSnap;if(T._mousePosition=g(T._containerRef,e),!(!T._mousePosition||n===i&&t<0||n===a&&t>0)){var s=T.pixelToLatLng(T._mousePosition),l=n+t;r&&(l=t<0?Math.floor(l):Math.ceil(l)),l=Math.max(i,Math.min(l,a)),T.setCenterZoomTarget(null,l,!1,s)}}})),r(l(T),"zoomPlusDelta",(function(){return T.state.zoom+T.state.zoomDelta})),r(l(T),"pixelToLatLng",(function(t,e,n){void 0===e&&(e=T.state.center),void 0===n&&(n=T.zoomPlusDelta());var o=T.state,i=o.width,a=o.height,r=o.pixelDelta,s=[(t[0]-i/2-(r?r[0]:0))/256,(t[1]-a/2-(r?r[1]:0))/256],l=p(e[1],n)+s[0],h=d(e[0],n)+s[1];return[Math.max(_[0],Math.min(_[1],v(h,n))),Math.max(_[2],Math.min(_[3],f(l,n)))]})),r(l(T),"latLngToPixel",(function(t,e,n){void 0===e&&(e=T.state.center),void 0===n&&(n=T.zoomPlusDelta());var o=T.state,i=o.width,a=o.height,r=o.pixelDelta,s=p(e[1],n),l=d(e[0],n),h=p(t[1],n),u=d(t[0],n);return[256*(h-s)+i/2+(r?r[0]:0),256*(u-l)+a/2+(r?r[1]:0)]})),r(l(T),"calculateZoomCenter",(function(t,e,n,o){var i=T.state,a=i.width,r=i.height,s=T.latLngToPixel(e,t,n),l=T.latLngToPixel(e,t,o),h=T.pixelToLatLng([a/2+l[0]-s[0],r/2+l[1]-s[1]],t,o);return T.limitCenterAtZoom(h,o)})),r(l(T),"setRef",(function(t){T._containerRef=t})),T.syncToProps=function(t,e){var n;return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var r=this;clearTimeout(n),n=setTimeout((function(){return t.apply(r,i)}),e)}}(T.syncToProps,60),T._lastZoom=null!==(n=null!==(o=e.defaultZoom)&&void 0!==o?o:e.zoom)&&void 0!==n?n:14,T._lastCenter=null!==(i=null!==(a=e.defaultCenter)&&void 0!==a?a:e.center)&&void 0!==i?i:[0,0],T.state={zoom:T._lastZoom,center:T._lastCenter,width:null!==(s=null!==(u=e.width)&&void 0!==u?u:e.defaultWidth)&&void 0!==s?s:-1,height:null!==(c=null!==(w=e.height)&&void 0!==w?w:e.defaultHeight)&&void 0!==c?c:-1,zoomDelta:0,pixelDelta:void 0,oldTiles:[],showWarning:!1,warningType:void 0},T}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var a=i.prototype;return a.componentDidMount=function(){var t=this;this.props.mouseEvents&&this.bindMouseEvents(),this.props.touchEvents&&this.bindTouchEvents(),this.props.width&&this.props.height||(this.updateWidthHeight()||x(this.updateWidthHeight),this.bindResizeEvent()),this.bindWheelEvent(),this.syncToProps(),"undefined"!==typeof window.ResizeObserver&&(this._resizeObserver=new window.ResizeObserver((function(){t.updateWidthHeight()})),this._resizeObserver.observe(this._containerRef))},a.componentWillUnmount=function(){this.props.mouseEvents&&this.unbindMouseEvents(),this.props.touchEvents&&this.unbindTouchEvents(),this.unbindWheelEvent(),this.props.width&&this.props.height||this.unbindResizeEvent(),this._resizeObserver&&this._resizeObserver.disconnect()},a.componentDidUpdate=function(t){var e;if(this.props.mouseEvents!==t.mouseEvents&&(this.props.mouseEvents?this.bindMouseEvents():this.unbindMouseEvents()),this.props.touchEvents!==t.touchEvents&&(this.props.touchEvents?this.bindTouchEvents():this.unbindTouchEvents()),this.props.width&&this.props.width!==t.width&&this.setState({width:this.props.width}),this.props.height&&this.props.height!==t.height&&this.setState({height:this.props.height}),(this.props.center||this.props.zoom)&&(this.props.center&&(this.props.center[0]!==(null===t||void 0===t||null===(e=t.center)||void 0===e?void 0:e[0])||this.props.center[1]!==t.center[1])||this.props.zoom!==t.zoom)){var n=this._isAnimating?this._centerTarget:this.state.center,o=this._isAnimating?this._zoomTarget:this.state.zoom;if(n&&o){var i,a,r=null!==(i=this.props.center)&&void 0!==i?i:n,s=null!==(a=this.props.zoom)&&void 0!==a?a:o;(Math.abs(s-o)>.001||Math.abs(r[0]-n[0])>1e-4||Math.abs(r[1]-n[1])>1e-4)&&this.setCenterZoomTarget(r,s,!0)}}},a.coordsInside=function(t){var e=this.state,n=e.width,o=e.height;if(t[0]<0||t[1]<0||t[0]>=n||t[1]>=o)return!1;var i=this._containerRef;if(i){var a=u(i),r=document.elementFromPoint(t[0]+a.x,t[1]+a.y);return i===r||i.contains(r)}return!1},a.tileValues=function(t){var e=t.center,n=t.zoom,o=t.pixelDelta,i=t.zoomDelta,a=t.width,r=t.height,s=Math.round(n+(i||0)),l=n+(i||0)-s,h=Math.pow(2,l),u=a/h,c=r/h,m=p(e[1],s)-(o?o[0]/256/h:0),f=d(e[0],s)-(o?o[1]/256/h:0),v=u/2/256,g=c/2/256;return{tileMinX:Math.floor(m-v),tileMaxX:Math.floor(m+v),tileMinY:Math.floor(f-g),tileMaxY:Math.floor(f+g),tileCenterX:m,tileCenterY:f,roundedZoom:s,zoomDelta:i||0,scaleWidth:u,scaleHeight:c,scale:h}},a.renderTiles=function(){for(var t=this,e=this.state,n=e.oldTiles,i=e.width,a=e.height,r=this.props.dprs,s=this.props.provider||c,l=this.tileValues(this.state),h=l.tileMinX,u=l.tileMaxX,m=l.tileMinY,p=l.tileMaxY,d=l.tileCenterX,f=l.tileCenterY,v=l.roundedZoom,g=l.scaleWidth,_=l.scaleHeight,w=l.scale,M=[],x=0;x<n.length;x++){var S=n[x],b=S.roundedZoom-v;if(!(Math.abs(b)>4||0===b))for(var z=1/Math.pow(2,b),E=256*-(h-S.tileMinX*z),C=256*-(m-S.tileMinY*z),y=Math.max(S.tileMinX,0),P=Math.max(S.tileMinY,0),D=Math.min(S.tileMaxX,Math.pow(2,S.roundedZoom)-1),Z=Math.min(S.tileMaxY,Math.pow(2,S.roundedZoom)-1),A=y;A<=D;A++)for(var k=P;k<=Z;k++)M.push({key:A+"-"+k+"-"+S.roundedZoom,url:s(A,k,S.roundedZoom),srcSet:T(r,s,A,k,S.roundedZoom),left:E+256*(A-S.tileMinX)*z,top:C+256*(k-S.tileMinY)*z,width:256*z,height:256*z,active:!1})}for(var L=Math.max(h,0),W=Math.max(m,0),R=Math.min(u,Math.pow(2,v)-1),O=Math.min(p,Math.pow(2,v)-1),F=L;F<=R;F++)for(var j=W;j<=O;j++)M.push({key:F+"-"+j+"-"+v,url:s(F,j,v),srcSet:T(r,s,F,j,v),left:256*(F-h),top:256*(j-m),width:256,height:256,active:!0});var I={width:g,height:_,position:"absolute",top:"calc((100% - "+a+"px) / 2)",left:"calc((100% - "+i+"px) / 2)",overflow:"hidden",willChange:"transform",transform:"scale("+w+", "+w+")",transformOrigin:"top left"},Y=this.props.boxClassname||"pigeon-tiles-box",N={position:"absolute",width:256*(u-h+1),height:256*(p-m+1),willChange:"transform",transform:"translate("+-(256*(d-h)-g/2)+"px, "+-(256*(f-m)-_/2)+"px)"},X=this.props.tileComponent;return o.createElement("div",{style:I,className:Y},o.createElement("div",{className:"pigeon-tiles",style:N},M.map((function(e){return o.createElement(X,{key:e.key,tile:e,tileLoaded:function(){return t.tileLoaded(e.key)}})}))))},a.renderOverlays=function(){var t=this,e=this.state,n=e.width,i=e.height,a=e.center,r={bounds:this.getBounds(),zoom:this.zoomPlusDelta(),center:a,width:n,height:i},s=o.Children.map(this.props.children,(function(e){if(!e)return null;if(!o.isValidElement(e))return e;var n=e.props,i=n.anchor,s=n.position,l=n.offset,h=t.latLngToPixel(i||s||a);return o.cloneElement(e,{left:h[0]-(l?l[0]:0),top:h[1]-(l?l[1]:0),latLngToPixel:t.latLngToPixel,pixelToLatLng:t.pixelToLatLng,setCenterZoom:t.setCenterZoomForChildren,mapProps:t.props,mapState:r})})),l={position:"absolute",width:n,height:i,top:"calc((100% - "+i+"px) / 2)",left:"calc((100% - "+n+"px) / 2)"};return o.createElement("div",{className:"pigeon-overlays",style:l},s)},a.renderAttribution=function(){var t=this.props,e=t.attribution,n=t.attributionPrefix;if(!1===e)return null;var i={color:"#0078A8",textDecoration:"none"};return o.createElement("div",{key:"attr",className:"pigeon-attribution",style:{position:"absolute",bottom:0,right:0,fontSize:"11px",padding:"2px 5px",background:"rgba(255, 255, 255, 0.7)",fontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",color:"#333"}},!1===n?null:o.createElement("span",null,n||o.createElement("a",{href:"https://pigeon-maps.js.org/",style:i,target:"_blank",rel:"noreferrer noopener"},"Pigeon")," | "),e||o.createElement("span",null," \xa9 ",o.createElement("a",{href:"https://www.openstreetmap.org/copyright",style:i,target:"_blank",rel:"noreferrer noopener"},"OpenStreetMap")," contributors"))},a.renderWarning=function(){var t=this.props,e=t.metaWheelZoom,n=t.metaWheelZoomWarning,i=t.twoFingerDrag,a=t.twoFingerDragWarning,r=t.warningZIndex,s=this.state,l=s.showWarning,h=s.warningType,u=s.width,c=s.height;if(e&&n||i&&a){var m={position:"absolute",top:0,left:0,width:u,height:c,overflow:"hidden",pointerEvents:"none",opacity:l?100:0,transition:"opacity 300ms",background:"rgba(0,0,0,0.5)",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",fontSize:22,fontFamily:'"Arial", sans-serif',textAlign:"center",zIndex:r},p="undefined"!==typeof window&&window.navigator&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?"\u2318":"ctrl",d="fingers"===h?a:n;return o.createElement("div",{className:"pigeon-overlay-warning",style:m},d.replace("META",p))}return null},a.render=function(){var t=this.props,e=t.touchEvents,n=t.twoFingerDrag,i=this.state,a=i.width,r=i.height,s={width:this.props.width?a:"100%",height:this.props.height?r:"100%",position:"relative",display:"inline-block",overflow:"hidden",background:"#dddddd",touchAction:e?n?"pan-x pan-y":"none":"auto"},l=!(!a||!r);return o.createElement("div",{style:s,ref:this.setRef,dir:"ltr"},l&&this.renderTiles(),l&&this.renderOverlays(),l&&this.renderAttribution(),l&&this.renderWarning())},i}(o.Component);function z(t){return o.createElement("div",{style:a({position:"absolute",transform:"translate("+t.left+"px, "+t.top+"px)"},t.style||{}),className:t.className?t.className+" pigeon-click-block":"pigeon-click-block"},t.children)}r(b,"defaultProps",{animate:!0,metaWheelZoom:!1,metaWheelZoomWarning:"Use META + wheel to zoom!",twoFingerDrag:!1,twoFingerDragWarning:"Use two fingers to move the map",zoomSnap:!0,mouseEvents:!0,touchEvents:!0,warningZIndex:100,animateMaxScreens:5,minZoom:1,maxZoom:18,limitBounds:"center",dprs:[],tileComponent:function(t){var e=t.tile,n=t.tileLoaded;return o.createElement("img",{src:e.url,srcSet:e.srcSet,width:e.width,height:e.height,loading:"lazy",onLoad:n,alt:"",style:{position:"absolute",left:e.left,top:e.top,willChange:"transform",transformOrigin:"top left",opacity:1}})}})}}]);
//# sourceMappingURL=374.0e45c2aa.chunk.js.map